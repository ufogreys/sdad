import { WithdrawalProof } from './WithdrawalProof'

describe('WithdrawalProof', () => {
  it('proof payload', async () => {
    const transferId = '0xf122da3206810cfd0d648ed0c2790653841e13529cbdaa396557f6deb290dac5'
    const wp = new WithdrawalProof(transferId)
    await wp.generateProof()
    const proof = wp.getProofPayload()
    const expected = {
      transferId: "0xf122da3206810cfd0d648ed0c2790653841e13529cbdaa396557f6deb290dac5",
      transferRootHash: "0xb1d65ec4a286253f647960a4ca40441b8765965a58c4942dba7b91f0cfebfc44",
      leaves: [
        "0x0d357d585eb0d4211e8925be36aff9cc194551c01d6144535fe7f4ee4c42f2f2",
        "0x5a690afad0c795e87f5fbf426869ffc8b4b40928702c24a7b767869a15618a48",
        "0x5c08c7f723336ef52886c70d77c320ba417c63725fcb47398c80ee275a86b194",
        "0xec92ecab0fb1cd397add7e77e1df15ee036830d94f0f9d65d190d245a0107499",
        "0xd78ddab0be4a53d6f8c28f3cc19357e15fd7e4c0860339aae36d085b0cdb71c5",
        "0x680fbd59fd201494064e7f17edb086e0be533f9497dcf0ee0666eede575788a9",
        "0xaa13540ec52ca0081e86ac801998f9bd48727ea1467acad40e8bfd0af84f7712",
        "0xb3b2204eebf5220d6f3336e5c662ae97e9e69e3f66e403c4afed0a9daf614209",
        "0xb7f16e3bc369c72a3bd4fae5cbb70d3cee354fce49169cc13bd7cfc504f04e70",
        "0x54da77eded882800f29ff62cdeed41364fd38d71b1772cf10f2998a83b60502b",
        "0x31fb826d980a3722a7a5dfc81df9ca4e8b79c55715adc73216f46d330e10514d",
        "0xce4f5ca930dcc6e3317fd5b173bfc596e1ede69c823dd07e15bae8878188e4df",
        "0x7281d26de3c04693b5568b0603c395939f51e1a102aa01943189797e49afb3b1",
        "0x1918e3d3b4c8bc45327e7990ef1fe08c5bd8d07b53f7069739d1d413d8d06408",
        "0x40909605b5e55074a49b5143b2705b9bc12a2027b5ae756780a4e9003a55eeb9",
        "0xd74ae2ab9499825013a91e1d8eb54c6d448c3c2368a03d8fb187d87361f9c0cf",
        "0x7465fafbd76b19b365dc8ec75298153ef1986b0f2df39fd8066810413c0687d6",
        "0x23fec7eaee76b125cbed4c72e356b2b0e4ff5931eefa01a3be1553de657a1013",
        "0x9d00cd5a342088cf72a8050fb390220a1ce86662448bcbc57dd64e6ecedfd1df",
        "0x8d215400ac2d7065bd9bcc4dca69aa0daf887bed4c951f1e65a1d1ea2be52651",
        "0xd6a25a4aa79d885c9360ef6352345dc2f397d4f02790cd02b5f95f97ac3b3ab7",
        "0xf075255af329bf72cd673485b97639fba1f6b404360c02c9f76e805c6ffb48d6",
        "0x1b85e8779b78bc704087b8618c8578ebf09cf8137a7adf6f90eb3c80382125f0",
        "0x9d01c055a589f020ec264f26072dcde9a9804b8bf41c4876495422194ba1dc86",
        "0x4c0b8c2cf7892bd8773435b18dae6c3ef4aa66d617eead6926cf24660693c159",
        "0xbab0eb5d03b8d769024a4c2f7bc9e4ada368e54654091e796a87f1c852895958",
        "0xa2d8cb799a624bbf08e869ae43154c73a86ea5f47e69c772c9d2a622a5590255",
        "0x27077796090b1d4ccc5654bcb4c4c8ea7cc85304be49185f3e03e535415d5c10",
        "0x07c41c24e66003ad1901cf7b1f796dc41af76c5a19f595663188368c10a9677f",
        "0xd0221dfdfe0a363f12aabdcc372fbfdc47e184587737a3099ece28e355eccb7d",
        "0xa87eb7399dad2c5934fa9e8d3f2c71233e72bcdc2d3e90cdef683eb7692f5251",
        "0x29a982e53efc67e6171d974a5f16a28ad503420af83349bea1a79e7cb238e2e5",
        "0x574bbbed96abb44f30a40223d0d606d117aaf1c9d82764f3a3ffceaf39008c12",
        "0xd55bb740879f212e13b158a8d26b87cfe93bd448f947788f5d94fe687abc7c7f",
        "0x78d041ebbb43ec76f12c8880ed537143b3b74f6a74e000cbe335f391be851541",
        "0x275d5704d386bcab7d528cfa89ff40be45541ac5f641aa1dda11aabe41f39b5f",
        "0x5449e93cc43621bc0e60d51f11933e78d14e7a5ad7b29d8a76bb74355c829125",
        "0xe44f433f0a655cfd0c58ec36829a4ef59b5db0fe7421d5194a59d4317867e4a9",
        "0xba5c4babc2700584710f56cdb859bd7d8e21d1e08e92d343d76de05c25528109",
        "0x470030c542e3288eb0c513be436ab86ff032e34478b0296899ebc2528a400f5e",
        "0x03fd23909be55beb3dce426e372be65a5c16242f6dfee1aa4fda31a37ceb1895",
        "0xbeda4576bb2298f5e53b1d773938b3eb85617a1a58b2adbd146b49adeeaa299a",
        "0x085462eb74d8962a6cc304382367808fb576a2231fc114a9aca7099182066999",
        "0xf5ce8df6a89561884e77254367728386abe4d40e11b892214481be5286004dab",
        "0x698678cfd09fefcd4d0921b9080f55babd1307a4148206fe07d0e9f7e25af9af",
        "0x7bad8b7081d51b8074e40d474c264645c2c33a6587c95bdcf1ba65587bd9b621",
        "0x24559de3d6bc3ad1d4adce05b6c90ca778b0cd884c56862138baafda75375209",
        "0x05f3faa2c65f1832ec8440e95f3a541348d95d334f411d898ca8984d83c11f5a",
        "0xe74b2fdc702f134f36309bed42c122106b4031c2c0963ca6aaa0c6a2820f1505",
        "0xee6aa01a127bd7aaea6bac8b4c5bf6230c0d4ded6a61b46021729f57bd01dadf",
        "0x98c6ef1693cef760b00b455cb54edc4b7693ba2f01b49e7e13587b9a3c5102ef",
        "0x54ee6ccc8b5134c265773666811d4e494d8dcd0a3df47cb50baa1e7a899a4a46",
        "0x2fb03a827f71196e98810fca4aec4dc3913cc58bba36ce7fd8ef63772cd91a80",
        "0x3a2845fd909879641de150c9df6c9e1cc9116ac399c1c5078cfc833f406ab1da",
        "0x9cc0fd236eec315d15341f76ccd882b12defa572f1bb4a6e267cce151c1e0f45",
        "0x044b8d0c4080ac83dd00d068517579261d9ea941795661ebeeb237ee433bace2",
        "0xe5b9e8ff3f463ddb6a2996ea1bb68f1c0a61eadfcf1f4d6b58dfed7959592cc4",
        "0x22f9febe8e978741ed04fd9c1dfe4539a262d98de7e7abc533fd31394473aea1",
        "0xacebe79e9617a2302521377bb7ddf2eefa6ea2b68bc2d5504a075f7fb7bf7474",
        "0x427a51ff099b9b3d39c7a6c6f814242b6f22a137c47f687a6419aeeb62da662f",
        "0x59bd5daa8e59a7de087c46b10414ab4cd6d386f5bba4790c2b94706766020c6f",
        "0x0f919487ff3d1e1481c40954336b70e4179b7c60cbc78bfb9ab05f1583d4de1a",
        "0x23ee642f2f61599ce005ef7c9eb2f7df884e87df2f03fcb6bd42b054d4e30fe7",
        "0x936d481834e26dffb1757b6cf8de024bccc7fa6caef7e3dbe3618387c96639a7",
        "0x70874af0612759a0eaaec2d50e8b09b4d138a1b3aa1e612583de649af8f9bf1a",
        "0xb0a0cd11ea3aebb4db73dfd5be0978e379b3b4a5329a901e153dce0472407ca8",
        "0x169e4f5c9e54f360a8f5123dbd5d5aea9df1cc3d25c16ceb6cc7661e3a57ed53",
        "0xf122da3206810cfd0d648ed0c2790653841e13529cbdaa396557f6deb290dac5",
        "0xd256d5506ecba8af6026521a599f22ca62c356627d5eda171c4cacff246cb881",
        "0x3bc50e322e6b60cab24dfd15c2d224cbaf9d2d6c230c32d9ec9ab25f9fc2a65c",
        "0xc25f176eeb34f40d401905c82babb0666375e076095598ddbd1d69e5be66696e",
        "0x1878084f881676ca5ec4e50a7b2a9a99e32349c6ca825357c3e3ac350cddb1f1",
        "0x0310840bd6e2b4640b838aa11fd0197ed8becdab15300379219d3783848f5174",
        "0x7103275350d3774aa0f6db2c0fc5dbc83d322b05bcf75216169aa58cfd491aad",
        "0xe594cae78b79c6e2864afeb4c5cc36310e00fcec1abb0931801f3eabcda4b8b8",
        "0xb892e1a324dd0a550f9cc392f5b4cb6b16e091fd5a6124ff6cde14e2ebc4f652",
        "0x35e3c87c77ff63f350b5a2f5f661796e203e939f8ab070e9833e1e568869b2e0",
        "0x21524e577c812c34ea4f10bc3d1a3143182ab12059fd30f54bc2fc4669700201",
        "0xd799fb93f8894985e2d9f0fb782d2388ca09ec70e5cde256b21a506696f7bee0",
        "0x0bf1d20b89552ea1734fa81731c5d6f22fb88d3ef00ede5aed5b0abcc81d5632",
        "0x8297e1a76f6e3dabe0f4ed58ea22446cdf256666cdb5526c03a03b3a0f72c88d",
        "0xff6e9af2604b470b16a85f9f9cba657b1443d485f66b9c583c9bd4f0a77d2595",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563",
        "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563"
      ],
      proof: [
        "0x169e4f5c9e54f360a8f5123dbd5d5aea9df1cc3d25c16ceb6cc7661e3a57ed53",
        "0x1de3271c582c5bf0ff5d81a8a92b4b2709f6984a2085f76ae1fab4751d2c205d",
        "0xdcd458943fdbefc3746c31d85909cef94fbe450c6b427ba91375106cb8c31d77",
        "0x9c7350c098ed0cf181a810b4c85ed6bfaf8333c30f9bb535d8bac209a2a7a2cd",
        "0xeaa47cb36514500948e21da10e2f002c10d6c5603cb00d54aea147cbc93de507",
        "0xdefff6d330bb5403f63b14f33b578274160de3a50df4efecf0e0db73bcdd3da5",
        "0xd9c5c55c78c949d4163781995f236eeb8a2127d190fc3507c3e7a554b292e37b"
      ],
      transferIndex: 67,
      rootTotalAmount: "4290846390066382204",
      numLeaves: 128
    }
    expect(JSON.stringify(proof)).toBe(JSON.stringify(expected))
  })
  it('tx payload', async () => {
    const transferId = '0xf122da3206810cfd0d648ed0c2790653841e13529cbdaa396557f6deb290dac5'
    const wp = new WithdrawalProof(transferId)
    await wp.generateProof()
    const payload = wp.getTxPayload()
    const expected = {
    recipient: "0x5d31004d9584829211c2350218ff417d81118a2e",
    amount: "2607904711275909247",
    transferNonce: "0xf295dbc7b51ba8be9e5a5094d12a9286b6778cb563eb572facdd54a366160354",
    bonderFee: "3179535954395123",
    amountOutMin: "2598814139956389829",
    deadline: "1637237183",
    transferRootHash: "0xb1d65ec4a286253f647960a4ca40441b8765965a58c4942dba7b91f0cfebfc44",
    rootTotalAmount: "4290846390066382204",
    transferIdTreeIndex: 67,
    siblings: [
      "0x169e4f5c9e54f360a8f5123dbd5d5aea9df1cc3d25c16ceb6cc7661e3a57ed53",
      "0x1de3271c582c5bf0ff5d81a8a92b4b2709f6984a2085f76ae1fab4751d2c205d",
      "0xdcd458943fdbefc3746c31d85909cef94fbe450c6b427ba91375106cb8c31d77",
      "0x9c7350c098ed0cf181a810b4c85ed6bfaf8333c30f9bb535d8bac209a2a7a2cd",
      "0xeaa47cb36514500948e21da10e2f002c10d6c5603cb00d54aea147cbc93de507",
      "0xdefff6d330bb5403f63b14f33b578274160de3a50df4efecf0e0db73bcdd3da5",
      "0xd9c5c55c78c949d4163781995f236eeb8a2127d190fc3507c3e7a554b292e37b"
    ],
    totalLeaves: 128
    }
    expect(JSON.stringify(payload)).toBe(JSON.stringify(expected))
  })
})
